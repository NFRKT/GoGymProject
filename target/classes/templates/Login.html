<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>GoGym - Rejestracja</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
        body { font-family: "Lato", sans-serif; }
        .register-container { max-width: 500px; margin: auto; padding: 30px; background: white; border-radius: 10px; box-shadow: 0px 0px 10px rgba(0,0,0,0.2); }
        .error-message { color: red; font-size: 0.9em; display: none; }
    </style>
</head>
<body class="w3-light-grey">
<div class="w3-container w3-padding-64 w3-center">
    <h2>GoGym - Rejestracja</h2>
    <div class="register-container w3-white">
        <form id="registrationForm" th:action="@{/register}" th:object="${User}" method="post">
            <label>Email:</label>
            <input class="w3-input w3-border" type="email" id="email" th:field="*{email}" required>
            <div id="emailError" class="error-message">Wprowadź poprawny email.</div>

            <label>Hasło:</label>
            <input class="w3-input w3-border" type="password" id="password" th:field="*{password}" required>
            <div id="passwordError" class="error-message">Hasło min. 6 znaków, zawiera cyfrę i literę.</div>

            <label>Imię:</label>
            <input class="w3-input w3-border" type="text" id="firstName" th:field="*{firstName}" required>
            <div id="firstNameError" class="error-message">Wpisz poprawne imię.</div>

            <label>Nazwisko:</label>
            <input class="w3-input w3-border" type="text" id="secondName" th:field="*{secondName}" required>
            <div id="secondNameError" class="error-message">Wpisz poprawne nazwisko.</div>

            <button type="submit" class="w3-button w3-blue w3-margin-top w3-round">Zarejestruj</button>
        </form>
    </div>
</div>

<script>
    document.getElementById("registrationForm").addEventListener("submit", function(event) {
        let isValid = true;
        const email = document.getElementById("email");
        const password = document.getElementById("password");
        const firstName = document.getElementById("firstName");
        const secondName = document.getElementById("secondName");

        const emailError = document.getElementById("emailError");
        const passwordError = document.getElementById("passwordError");
        const firstNameError = document.getElementById("firstNameError");
        const secondNameError = document.getElementById("secondNameError");

        emailError.style.display = "none";
        passwordError.style.display = "none";
        firstNameError.style.display = "none";
        secondNameError.style.display = "none";

        email.classList.remove("w3-border-red");
        password.classList.remove("w3-border-red");
        firstName.classList.remove("w3-border-red");
        secondName.classList.remove("w3-border-red");

        if (!email.value.includes("@")) {
            emailError.style.display = "block";
            email.classList.add("w3-border-red");
            isValid = false;
        }

        if (password.value.length < 6 || !/\d/.test(password.value) || !/[a-zA-Z]/.test(password.value)) {
            passwordError.style.display = "block";
            password.classList.add("w3-border-red");
            isValid = false;
        }

        if (!/^[A-Z][a-z]+$/.test(firstName.value)) {
            firstNameError.style.display = "block";
            firstName.classList.add("w3-border-red");
            isValid = false;
        }

        if (!/^[A-Z][a-z]+$/.test(secondName.value)) {
            secondNameError.style.display = "block";
            secondName.classList.add("w3-border-red");
            isValid = false;
        }

        if (!isValid) event.preventDefault();
    });
</script>
</body>
</html>
